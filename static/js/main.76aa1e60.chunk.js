(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{16:function(t,e,n){t.exports=n(31)},21:function(t,e,n){},22:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),u=n(6),o=n.n(u),a=(n(21),n(22),n(1));n(27);var l=Object(a.b)(null,(function(t,e){return{open:function(){return t({type:"OPEN",x:e.x,y:e.y})},toggleFlag:function(){return t({type:"TOGGLE_FLAG",x:e.x,y:e.y})},autoOpen:function(){return t({type:"AUTO_OPEN",x:e.x,y:e.y})}}}))((function(t){return r.a.createElement("div",{className:"cell",onClick:function(){return t.open()},onContextMenu:function(e){e.preventDefault(),t.toggleFlag()},onDoubleClick:t.autoOpen},t.closed?r.a.createElement("div",{className:"cover"},t.flagged?"\u26f3\ufe0f":null):t.bomb?"\ud83d\udca3":t.number)})),s=(n(28),Object(a.b)((function(t){return{field:t.field}}))((function(t){var e=t.field;return r.a.createElement(r.a.Fragment,null,e.map((function(t,e){return r.a.createElement("div",{className:"row",key:e},t.map((function(t,n){return r.a.createElement(l,{key:n,y:n,x:e,closed:t.closed,bomb:t.bomb,number:t.number,flagged:t.flagged})})))})))})));n(29);var c=Object(a.b)((function(t){return{bombs:t.bombs}}))((function(t){return r.a.createElement("div",{className:"bombs"},"\ud83d\udca3 ".concat(t.bombs.toString().padStart(2,"0")))}));var f=Object(a.b)()((function(){return r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(c,null))})),h=n(5),b=n(7),d=n(4),m=function(){function t(e,n){Object(b.a)(this,t),this._width=e,this._height=n,this._items=void 0,this._items=new Array(e*n)}return Object(d.a)(t,[{key:"items",get:function(){return this._items}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),Object(d.a)(t,[{key:"itemAt",value:function(t,e){if(t<0||t>=this._height)throw new Error("x is out of range");if(e<0||e>=this._width)throw new Error("y is out of range");return this._items[this.calculateIndex(t,e)]}},{key:"unsageGetItemAt",value:function(t,e){if(!(t<0||t>=this._height||e<0||e>=this._width))return this._items[this.calculateIndex(t,e)]}},{key:"setItemAt",value:function(t,e,n){t<0||t>=this._height||e<0||e>=this._width||(this._items[this.calculateIndex(t,e)]=n)}},{key:"fill",value:function(t){var e=this;this.iterate((function(n,i,r){return e.setItemAt(i,r,t(i,r))}))}},{key:"iterate",value:function(t){for(var e=0;e<this._height;e++)for(var n=0;n<this._width;n++)t(this.itemAt(e,n),e,n)}},{key:"getItemsAround",value:function(t,e){for(var n=[],i=-1;i<=1;i++)for(var r=-1;r<=1;r++)0===i&&0===r||n.push(this.unsageGetItemAt(t+i,e+r));return n.filter((function(t){return void 0!==t}))}},{key:"get3X3SubMatrixAround",value:function(e,n){var i=this,r=new t(3,3);return r.fill((function(t,r){return i.unsageGetItemAt(e+t-1,n+r-1)})),r}},{key:"toDoubleArray",value:function(){for(var t=[],e=0;e<this.height;e++){var n=[];t.push(n);for(var i=0;i<this.width;i++)n.push(this.itemAt(e,i))}return t}},{key:"calculateIndex",value:function(t,e){return t*this._width+e}}]),t}(),g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;Object(b.a)(this,t),this._width=e,this._height=n,this._bombCount=i,this._field=void 0,this._firstOpenedPosition=void 0,this._field=new m(e,n),this._field.fill((function(){return{bomb:!1,closed:!0,flagged:!1}}))}return Object(d.a)(t,[{key:"fieldMatrix",get:function(){return this._field}},{key:"cells",get:function(){return this._field.items}},{key:"bombCount",get:function(){return this._bombCount}},{key:"bombsRemaining",get:function(){return this.bombCount-this.cells.filter((function(t){return t.flagged})).length}}]),Object(d.a)(t,[{key:"cellAt",value:function(t,e){return this._field.itemAt(t,e)}},{key:"open",value:function(t,e){var n=this;this._firstOpenedPosition||(this._firstOpenedPosition=[t,e],this.generate());var i=this.cellAt(t,e);if(i.closed&&!i.flagged)if(i.closed=!1,i.bomb)this.cells.forEach((function(t){return t.closed=!1}));else if(null==i.number){!function t(e,i){n.fieldMatrix.get3X3SubMatrixAround(e,i).iterate((function(n,r,u){n&&!n.bomb&&n.closed&&(n.closed=!1,null==n.number&&t(e+r-1,i+u-1))}))}(t,e)}}},{key:"autoOpen",value:function(t,e){var n=this,i=this.cellAt(t,e);i.closed||null==i.number||this.fieldMatrix.getItemsAround(t,e).filter((function(t){return t.flagged})).length===i.number&&this.fieldMatrix.get3X3SubMatrixAround(t,e).iterate((function(i,r,u){i&&!i.flagged&&n.open(t+r-1,e+u-1)}))}},{key:"generate",value:function(){this.populateBombs()}},{key:"populateBombsFromPattern",value:function(t){var e=0,n=0,i=!0,r=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){switch(o.value){case"|":e++,n=0;continue;case"*":this.cellAt(e,n).bomb=!0;break;case"_":this.cellAt(e,n).bomb=!1}n++}}catch(l){r=!0,u=l}finally{try{i||null==a.return||a.return()}finally{if(r)throw u}}this.setNumbers()}},{key:"populateBombs",value:function(){for(var t=this._bombCount;t>0;){var e=[this.random(this._height),this.random(this._width)];if(!(Math.abs(this._firstOpenedPosition[0]-e[0])<2&&Math.abs(this._firstOpenedPosition[1]-e[1])<2)){var n=this.cellAt(e[0],e[1]);n.bomb||(n.bomb=!0,t--)}}this.setNumbers()}},{key:"setNumbers",value:function(){var t=this;this.iterateField((function(e,n,i){if(e.bomb)e.number=null;else{var r=t._field.getItemsAround(n,i).reduce((function(t,e){return t+(e.bomb?1:0)}),0);e.number=r||null}}))}},{key:"random",value:function(t){return Math.floor(Math.random()*t)}},{key:"iterateField",value:function(t){this._field.iterate(t)}}]),t}(),v=n(14),y=n.n(v),_=new g(30,16,99);function p(){return{field:y.a.cloneDeep(_.fieldMatrix.toDoubleArray()),bombs:_.bombsRemaining}}var k=n(15),A=n.n(k),O=Object(h.c)((function(t,e){switch(e.type){case"OPEN":return _.open(e.x,e.y),p();case"TOGGLE_FLAG":var n=_.cellAt(e.x,e.y);return n.flagged=!n.flagged,p();case"AUTO_OPEN":return _.autoOpen(e.x,e.y),p();default:return p()}}),p(),Object(h.a)(A.a));o.a.render(r.a.createElement(a.a,{store:O},r.a.createElement(f,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.76aa1e60.chunk.js.map